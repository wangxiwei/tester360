
<!DOCTYPE HTML>
<html lang="zh-cn,en" >
    <head>
        <title>NODE_EXPRESS_VIEW · node-wiki</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.1.1">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-disqus/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="NODE_DATABASE.html" />
    
    
    <link rel="prev" href="NODE_EXPRESS.html" />
    

    <!-- tester360.cn Baidu tongji analytics -->
<script>
var _hmt = _hmt || [];
(function() {
var hm = document.createElement("script");
hm.src = "//hm.baidu.com/hm.js?7d789811683659f2ce2723c13b6f88ef";
var s = document.getElementsByTagName("script")[0];
s.parentNode.insertBefore(hm, s);
})();
</script>
</head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="http://www.tester360.cn" target="_blank" class="custom-link">首页</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    README
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="PREFACE.html">
            
                <a href="PREFACE.html">
            
                    
                    PREFACE
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="NODE_INTRODUCE.html">
            
                <a href="NODE_INTRODUCE.html">
            
                    
                    NODE_INTRODUCE
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="NODE_JAVASCRIPT.html">
            
                <a href="NODE_JAVASCRIPT.html">
            
                    
                    NODE_JAVASCRIPT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="NODE_INSTALL.html">
            
                <a href="NODE_INSTALL.html">
            
                    
                    NODE_INSTALL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="NODE_ES6.html">
            
                <a href="NODE_ES6.html">
            
                    
                    NODE_ES6
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="NODE_BASIC.html">
            
                <a href="NODE_BASIC.html">
            
                    
                    NODE_BASIC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="NODE_NPM.html">
            
                <a href="NODE_NPM.html">
            
                    
                    NODE_NPM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="NODE_EXPRESS.html">
            
                <a href="NODE_EXPRESS.html">
            
                    
                    NODE_EXPRESS
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.10" data-path="NODE_EXPRESS_VIEW.html">
            
                <a href="NODE_EXPRESS_VIEW.html">
            
                    
                    NODE_EXPRESS_VIEW
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="NODE_DATABASE.html">
            
                <a href="NODE_DATABASE.html">
            
                    
                    NODE_DATABASE
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="NODE_TEST.html">
            
                <a href="NODE_TEST.html">
            
                    
                    NODE_TEST
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="NODE_RUN.html">
            
                <a href="NODE_RUN.html">
            
                    
                    NODE_RUN
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="TODO_LIST.html">
            
                <a href="TODO_LIST.html">
            
                    
                    TODO_LIST
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="APPENDIX.html">
            
                <a href="APPENDIX.html">
            
                    
                    APPENDIX
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="LINKS.html">
            
                <a href="LINKS.html">
            
                    
                    LINKS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="BIBLIOGRAPHY.html">
            
                <a href="BIBLIOGRAPHY.html">
            
                    
                    BIBLIOGRAPHY
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >NODE_EXPRESS_VIEW</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
                                <section class="normal markdown-section">
                                
                                <h1 id="&#x524D;&#x8A00;">&#x524D;&#x8A00;</h1>
<p>&#x5728;&#x958B;&#x59CB;&#x672C;&#x7AE0;&#x7BC0;&#x4EE5;&#x524D;&#x5148;&#x4F86;&#x8AC7;&#x8AC7;MVC&#x67B6;&#x69CB;</p>
<h1 id="mmodelvviewccontroll">M(MODEL)V(VIEW)C(CONTROLL)</h1>
<p>MVC&#x662F;&#x8FD1;&#x5E74;&#x4F86;&#x6D41;&#x884C;&#x7684;web&#x67B6;&#x69CB;&#xFF0C;&#x4F46;&#x9019;&#x500B;&#x6982;&#x5FF5;&#x4E26;&#x4E0D;&#x9650;&#x5B9A;&#x5728;web&#x4E0A;&#xFF0C;&#x9023;android&#x90FD;&#x6709;&#x5BE6;&#x505A;&#x985E;&#x4F3C;&#x7684;&#x6982;&#x5FF5;&#x3002;
&#x4F55;&#x8B02;MVC?&#x4F60;&#x554F;&#x5DE5;&#x7A0B;&#x5E2B;&#x6BCF;&#x500B;&#x4EBA;&#x7684;&#x770B;&#x6CD5;&#x90FD;&#x4E0D;&#x5927;&#x4E00;&#x6A23;&#xFF0C;&#x4F46;&#x4ED6;&#x5011;&#x90FD;&#x4E00;&#x81F4;&#x540C;&#x610F;&#x597D;&#x7684;&#x5DE5;&#x7A0B;&#x5E2B;&#x4E00;&#x5B9A;&#x8981;&#x6703;MVC&#x3002;</p>
<p>&#x5728;&#x9019;&#x88E1;&#x63D0;&#x4F9B;wiki&#x770B;&#x6CD5;:</p>
<p><strong>&#xFF08;&#x63A7;&#x5236;&#x5668; Controller&#xFF09;</strong>- &#x8CA0;&#x8CAC;&#x8F49;&#x767C;&#x8ACB;&#x6C42;&#xFF0C;&#x5C0D;&#x8ACB;&#x6C42;&#x9032;&#x884C;&#x8655;&#x7406;&#x3002;</p>
<p><strong>&#xFF08;&#x8996;&#x5716; View&#xFF09;</strong> - &#x4ECB;&#x9762;&#x8A2D;&#x8A08;&#x4EBA;&#x54E1;&#x9032;&#x884C;&#x5716;&#x5F62;&#x4ECB;&#x9762;&#x8A2D;&#x8A08;&#x3002;</p>
<p><strong>&#xFF08;&#x6A21;&#x578B; Model&#xFF09;</strong> - &#x7A0B;&#x5F0F;&#x8A2D;&#x8A08;&#x5E2B;&#x7DE8;&#x5BEB;&#x7A0B;&#x5F0F;&#x61C9;&#x6709;&#x7684;&#x529F;&#x80FD;&#xFF08;&#x5BE6;&#x4F5C;&#x6F14;&#x7B97;&#x6CD5;&#x7B49;&#x7B49;&#xFF09;&#x3001;&#x8CC7;&#x6599;&#x5EAB;&#x5C08;&#x5BB6;&#x9032;&#x884C;&#x8CC7;&#x6599;&#x7BA1;&#x7406;&#x548C;&#x8CC7;&#x6599;&#x5EAB;&#x8A2D;&#x8A08;(&#x53EF;&#x4EE5;&#x5BE6;&#x4F5C;&#x5177;&#x9AD4;&#x7684;&#x529F;&#x80FD;)&#x3002;</p>
<p>&#x8F49;&#x63DB;&#x6210;Node.js&#x7684;&#x8AAA;&#x6CD5;&#x5C31;&#x662F;&#xFF1A;</p>
<p><strong>&#xFF08;&#x63A7;&#x5236;&#x5668; Controller&#xFF09;</strong>- server(express)&#xFF0C;&#x63A5;&#x53D7;&#x53C3;&#x6578;(POST OR GET)&#x5F8C;&#x8F49;&#x50B3;&#x81F3;&#x8981;&#x57F7;&#x884C;&#x7684;&#x7A0B;&#x5F0F;&#xFF0C;&#x82E5;&#x6709;&#x9700;&#x8981;&#x5247;&#x56DE;&#x50B3;&#x7D50;&#x679C;&#x3002;</p>
<p><strong>&#xFF08;&#x8996;&#x5716; View&#xFF09;</strong> - html&#x90E8;&#x5206;&#xFF0C;&#x70BA;&#x4E86;&#x8F38;&#x51FA;Controller&#x7684;&#x8A0A;&#x606F;&#xFF0C;&#x6703;&#x9700;&#x8981;&#x7528;&#x5230;view engine&#xFF0C;&#x4E0B;&#x9762;&#x6703;&#x4ECB;&#x7D39;ejs&#x8DDF;angular.js</p>
<p><strong>&#xFF08;&#x6A21;&#x578B; Model&#xFF09;</strong>- &#x908F;&#x8F2F;&#x8655;&#x7406;</p>
<h1 id="&#x5BE6;&#x4F8B;&#x4E00;-mvc&#x57FA;&#x672C;&#x7BC4;&#x4F8B;">&#x5BE6;&#x4F8B;&#x4E00; MVC&#x57FA;&#x672C;&#x7BC4;&#x4F8B;</h1>
<p>&#x8B93;&#x6211;&#x5011;&#x505A;&#x500B;&#x7BC4;&#x4F8B;&#xFF0C;&#x5EFA;&#x7ACB;&#x4E00;&#x500B;&#x540D;&#x53EB;<strong>node_mvc_1</strong>&#x76EE;&#x9304;</p>
<p>&#x4F60;&#x53EF;&#x4EE5;&#x53C3;&#x8003; <a href="https://github.com/y2468101216/node-wiki-gitbook/tree/master/src/node_mvc_1" target="_blank">https://github.com/y2468101216/node-wiki-gitbook/tree/master/src/node_mvc_1</a></p>
<p>&#x7D50;&#x69CB;:</p>
<pre><code>node_mvc_1/
&#x251C;&#x2500;&#x2500; bin/
|   &#x251C;&#x2500;&#x2500; download.js
&#x251C;&#x2500;&#x2500; download/
&#x2502;   &#x251C;&#x2500;&#x2500; a.txt
&#x2502;   &#x251C;&#x2500;&#x2500; b.txt
&#x251C;&#x2500;&#x2500; public/
&#x2502;   &#x251C;&#x2500;&#x2500; index.html
&#x2514;&#x2500;&#x2500; app.js
</code></pre><p>bin/download.js:</p>
<pre><code class="lang-javascript"><span class="hljs-comment">/**
 * Name:download.js
 * Purpose:Model download example
 * Author:Yun
 * Version:1.0
 * Update:2015-09-22
 */</span>
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">this</span>.checkFile = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">pathString, callback</span>)</span>{
        <span class="hljs-keyword">var</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;fs&apos;</span>);
        fs.stat(pathString,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, stats</span>)</span>{
            <span class="hljs-keyword">if</span>(!err){
                callback(<span class="hljs-literal">true</span>);
            }<span class="hljs-keyword">else</span>{
                callback(<span class="hljs-literal">false</span>);
            }
        });
    }
}
</code></pre>
<p>public/index.html:</p>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Node MVC 1<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;./download/a.txt&quot;</span>&gt;</span>download a<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;./download/b.txt&quot;</span>&gt;</span>download b<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;./download/c.txt&quot;</span>&gt;</span>download c<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>app.js:</p>
<pre><code class="lang-javascript"><span class="hljs-comment">/**
 * Name:app.js
 * Purpose:controller express example
 * Author:Yun
 * Version:1.0
 * Update:2015-09-22
 */</span>

<span class="hljs-keyword">var</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;express&apos;</span>);
<span class="hljs-keyword">var</span> app = express();

app.get(<span class="hljs-string">&apos;/&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>) </span>{
    <span class="hljs-keyword">var</span> options = {
        root : __dirname + <span class="hljs-string">&apos;/public/&apos;</span>,
        dotfiles : <span class="hljs-string">&apos;deny&apos;</span>,
        headers : {
            <span class="hljs-string">&apos;x-timestamp&apos;</span> : <span class="hljs-built_in">Date</span>.now(),
            <span class="hljs-string">&apos;x-sent&apos;</span> : <span class="hljs-literal">true</span>
        }
    };

    res.sendFile(<span class="hljs-string">&apos;index.html&apos;</span>, options, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
        <span class="hljs-keyword">if</span> (err) {
            res.status(err.status).end();
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// console.log(&apos;Sent:index.html&apos;);</span>
        }
    });
});

app.get(<span class="hljs-string">&apos;/download/:name&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>) </span>{
    <span class="hljs-keyword">var</span> downloadClass = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./bin/download.js&apos;</span>);
    <span class="hljs-keyword">var</span> dl = <span class="hljs-keyword">new</span> downloadClass();
    <span class="hljs-keyword">var</span> pathString = <span class="hljs-string">&apos;./download/&apos;</span> + req.params.name;

    dl.checkFile(pathString, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">isFile</span>) </span>{
        <span class="hljs-keyword">if</span> (isFile) {
            res.download(pathString);
        } <span class="hljs-keyword">else</span> {
            res.send(<span class="hljs-string">&apos;error&apos;</span>);
        }
    });
});

<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;server is running&apos;</span>);

app.listen(<span class="hljs-number">8080</span>);
</code></pre>
<p>&#x9019;&#x662F;&#x4E00;&#x500B;&#x4E0B;&#x8F09;&#x6A94;&#x6848;&#x7684;&#x7BC4;&#x4F8B;&#xFF0C;&#x5728;index.html&#x88E1;&#x6709;&#x4E09;&#x500B;&#x8D85;&#x9023;&#x7D50;&#x5206;&#x5225;&#x5C0D;&#x61C9;a.txt&#x3001;b.txt&#x3001;c.txt&#x3002;&#x4F46;&#x4F60;&#x53EF;&#x4EE5;&#x6CE8;&#x610F;&#x5230;&#x5728;download&#x76EE;&#x9304;&#x88E1;
&#x4E26;&#x6C92;&#x6709;c.txt&#xFF0C;&#x6240;&#x4EE5;&#x4ED6;&#x61C9;&#x8A72;&#x6703;&#x56DE;&#x50B3;error&#xFF0C;&#x4E0D;&#x904E;&#x4ECA;&#x5929;&#x7684;&#x91CD;&#x9EDE;&#x4E0D;&#x5728;&#x90A3;&#x908A;&#xFF0C;&#x8B93;&#x6211;&#x5011;&#x56DE;&#x982D;&#x4F86;&#x770B;app.js</p>
<p>app.js&#x628A;&#x6AA2;&#x67E5;&#x6A94;&#x6848;&#x662F;&#x5426;&#x5B58;&#x5728;&#x7684;&#x908F;&#x8F2F;&#x8655;&#x7406;&#x62BD;&#x96E2;&#x53E6;&#x5916;&#x505A;&#x6210;&#x4E00;&#x500B;class&#xFF0C;&#x8B93;app.js&#x53EA;&#x55AE;&#x7D14;&#x8655;&#x7406;controller&#x7684;&#x554F;&#x984C;&#xFF1A;&#x8F49;&#x50B3;&#x7D66;model&#xFF0C;&#x56DE;&#x50B3;&#x7D66;view&#x3002;</p>
<p>&#x9019;&#x6A23;&#x7684;&#x597D;&#x8655;&#x662F;&#x4F60;&#x6613;&#x65BC;&#x7DAD;&#x8B77;&#xFF0C;&#x4E0D;&#x6703;&#x56E0;&#x70BA;&#x4E00;&#x500B;&#x7A0B;&#x5F0F;bug&#x5C0E;&#x81F4;&#x6574;&#x500B;server crush&#xFF0C;&#x7576;&#x7136;&#x6A94;&#x6848;&#x8DDF;&#x7A0B;&#x5F0F;&#x78BC;&#x6703;&#x8B8A;&#x5F97;&#x6BD4;&#x8F03;&#x591A;&#xFF0C;&#x4F46;&#x6574;&#x9AD4;&#x800C;&#x8A00;&#x8907;&#x96DC;&#x5EA6;&#x662F;&#x4E0B;&#x964D;&#x7684;&#x3002;</p>
<h1 id="&#x5BE6;&#x4F8B;&#x4E8C;-&#x8F38;&#x51FA;&#x6587;&#x5B57;">&#x5BE6;&#x4F8B;&#x4E8C; &#x8F38;&#x51FA;&#x6587;&#x5B57;</h1>
<p>&#x5728;Node.js&#x88E1;&#x9762;view engine&#x5206;&#x6210;&#x5169;&#x500B;&#xFF1A;jade&#x8DDF;ejs&#xFF0C;&#x6211;&#x6703;&#x8AC7;&#x8DDF;php&#x60F3;&#x6CD5;&#x6BD4;&#x8F03;&#x63A5;&#x8FD1;&#x7684;ejs&#x3002;</p>
<p>&#x5982;&#x679C;&#x8DDF;&#x6211;&#x4E00;&#x6A23;&#x6709;&#x505A;&#x904E;php&#x7684;&#x8A71;&#xFF0C;&#x90A3;&#x4F60;&#x61C9;&#x8A72;&#x8A18;&#x5F97;php&#x672C;&#x8EAB;&#x5373;&#x662F;&#x500B;view engine&#x9019;&#x4EF6;&#x4E8B;&#xFF0C;&#x4F46;&#x5F88;&#x53EF;&#x60DC;&#x7684;&#x662F;Node.js&#x4E26;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;
&#x9019;&#x6A23;&#x8F38;&#x51FA;&#xFF0C;&#x4F46;&#x4ED6;&#x6709;&#x985E;&#x4F3C;&#x7684;&#x6771;&#x897F;&#x53EF;&#x4EE5;&#x8B93;&#x4F60;&#x7121;&#x75DB;&#x8F49;&#x63DB;&#xFF0C;&#x6C92;&#x932F;&#xFF01;&#x5C31;&#x662F;ejs</p>
<p>&#x8B93;&#x6211;&#x5011;&#x505A;&#x500B;&#x7BC4;&#x4F8B;&#xFF0C;&#x5EFA;&#x7ACB;&#x4E00;&#x500B;&#x540D;&#x53EB;<strong>node_mvc_2_ejs</strong>&#x76EE;&#x9304;</p>
<p>&#x4F60;&#x53EF;&#x4EE5;&#x53C3;&#x8003; <a href="https://github.com/y2468101216/node-wiki-gitbook/tree/master/src/node_mvc_2_ejs" target="_blank">https://github.com/y2468101216/node-wiki-gitbook/tree/master/src/node_mvc_2_ejs</a></p>
<p>&#x5148;&#x5B89;&#x88DD;ejs:</p>
<pre><code>npm install ejs
</code></pre><p>&#x7D50;&#x69CB;:</p>
<pre><code>node_mvc_2_ejs/
&#x251C;&#x2500;&#x2500; bin/
|   &#x251C;&#x2500;&#x2500; login.js
&#x251C;&#x2500;&#x2500; views/
&#x2502;   &#x251C;&#x2500;&#x2500; index.html
&#x2514;&#x2500;&#x2500; app.js
</code></pre><p>login.js:</p>
<pre><code class="lang-javascript"><span class="hljs-comment">/**
 * Name:login.js
 * Purpose:ejs login example
 * Author:Yun
 * Version:1.0
 * Update:2015-09-22
 */</span>

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">this</span>.check = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">account, password, callback</span>)</span>{
        <span class="hljs-keyword">var</span> message = <span class="hljs-string">&apos;login success&apos;</span>;
        <span class="hljs-keyword">var</span> error = <span class="hljs-literal">false</span>;

        <span class="hljs-keyword">if</span>(account != <span class="hljs-string">&apos;test&apos;</span> &amp;&amp; error == <span class="hljs-literal">false</span>){
            message = <span class="hljs-string">&apos;account error&apos;</span>;
            error = <span class="hljs-literal">true</span>;

        }

        <span class="hljs-keyword">if</span>(password != <span class="hljs-string">&apos;test&apos;</span> &amp;&amp; error == <span class="hljs-literal">false</span>){
            message = <span class="hljs-string">&apos;password error&apos;</span>;
            error = <span class="hljs-literal">true</span>;
        }

        callback(message, error);
    }
}
</code></pre>
<p>index.html:</p>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Node MVC 2 EJS<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/login&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>Account:<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;account&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>Password:<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span>submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">message</span>) { %&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">%</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">error</span>) { %&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color:red;&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">%=</span> <span class="hljs-attr">message</span> %&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">%</span> } <span class="hljs-attr">else</span> { %&gt;</span>
             <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color:green;&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">%=</span> <span class="hljs-attr">message</span> %&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">%</span> } %&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">%</span> } %&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>app.js:</p>
<pre><code class="lang-javascript"><span class="hljs-comment">/**
 * Name:app.js
 * Purpose:ejs express example
 * Author:Yun
 * Version:1.0
 * Update:2015-09-22
 */</span>

<span class="hljs-keyword">var</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;express&apos;</span>);
<span class="hljs-keyword">var</span> bodyParser = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;body-parser&apos;</span>);

<span class="hljs-keyword">var</span> app = express();

<span class="hljs-comment">//create application/x-www-form-urlencoded parser</span>
app.use(bodyParser.urlencoded({
    extended : <span class="hljs-literal">true</span>
}));

app.set(<span class="hljs-string">&apos;views&apos;</span>, __dirname + <span class="hljs-string">&apos;/views&apos;</span>);
app.set(<span class="hljs-string">&apos;view engine&apos;</span>, <span class="hljs-string">&apos;ejs&apos;</span>);
app.engine(<span class="hljs-string">&apos;html&apos;</span>, <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;ejs&apos;</span>).renderFile);

<span class="hljs-comment">//index page</span>
app.get(<span class="hljs-string">&apos;/&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>) </span>{
    res.render(<span class="hljs-string">&apos;index.html&apos;</span>,{message:<span class="hljs-literal">false</span>});
});

<span class="hljs-comment">//login</span>
app.post(<span class="hljs-string">&apos;/login&apos;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>)</span>{
    <span class="hljs-keyword">var</span> loginClass = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./bin/login.js&apos;</span>);
    <span class="hljs-keyword">var</span> login = <span class="hljs-keyword">new</span> loginClass();
    login.check(req.body.account, req.body.password,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">returnMessage, isError</span>)</span>{
        res.render(<span class="hljs-string">&apos;index.html&apos;</span>,{message:returnMessage,error:isError});
    });
});

<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;server is running&apos;</span>);

app.listen(<span class="hljs-number">8080</span>);
</code></pre>
<p><img src="img/zh-tw/node_mvc_2/node_mvc_2_original.png" alt="node_mvc_2_original.png"></p>
<p><img src="img/zh-tw/node_mvc_2/node_mvc_2_account_error.png" alt="node_mvc_2_account_error.png"></p>
<p><img src="img/zh-tw/node_mvc_2/node_mvc_2_password_error.png" alt="node_mvc_2_password_error.png"></p>
<p><img src="img/zh-tw/node_mvc_2/node_mvc_2_success.png" alt="node_mvc_2_success.png"></p>
<p>&#x8B93;&#x6211;&#x5011;&#x4F86;&#x8A0E;&#x8AD6;&#x4E00;&#x4E0B;app.js&#x88E1;&#x9762;&#x591A;&#x7684;&#x6771;&#x897F;</p>
<pre><code class="lang-javascript">app.use(bodyParser.urlencoded({
    extended : <span class="hljs-literal">true</span>
}));
</code></pre>
<p>&#x9019;&#x6BB5;&#x662F;&#x8AAA;&#x5982;&#x679C;&#x5C01;&#x5305;&#x88E1;&#x7684;body&#x6709;&#x6771;&#x897F;&#x7684;&#x8A71;&#xFF0C;&#x7528;qs library&#x53BB;&#x722C;&#xFF0C;&#x95DC;&#x65BC;&#x8981;&#x63A1;&#x7528;qs library&#x9084;&#x662F;query string
&#x8ACB;&#x53C3;&#x8003;&#x4EE5;&#x4E0B;&#x9023;&#x7D50;&#xFF1A;<a href="http://stackoverflow.com/questions/29175465/body-parser-extended-option-qs-vs-querystring" target="_blank">http://stackoverflow.com/questions/29175465/body-parser-extended-option-qs-vs-querystring</a></p>
<pre><code class="lang-javascript">app.set(<span class="hljs-string">&apos;views&apos;</span>, __dirname + <span class="hljs-string">&apos;/views&apos;</span>);
app.set(<span class="hljs-string">&apos;view engine&apos;</span>, <span class="hljs-string">&apos;ejs&apos;</span>);
app.engine(<span class="hljs-string">&apos;html&apos;</span>, <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;ejs&apos;</span>).renderFile);
</code></pre>
<p>app.set&#x5C31;&#x662F;&#x53EF;&#x4EE5;&#x8A2D;&#x5B9A;&#x4E00;&#x4E9B;express&#x7684;&#x5E38;&#x6578;&#xFF0C;&#x8B93;&#x4ED6;&#x77E5;&#x9053;&#x8981;&#x53BB;&#x54EA;&#x627E;&#x3002;</p>
<p>&#x7B2C;&#x4E00;&#x884C;&#x8A2D;&#x5B9A;views&#x7684;&#x76EE;&#x9304;&#x5728;&#x54EA;&#x3002;</p>
<p>&#x7B2C;&#x4E8C;&#x884C;&#x8A2D;&#x5B9A;&#x8981;&#x4F7F;&#x7528;&#x7684;view engine&#x3002;</p>
<p>&#x7B2C;&#x4E09;&#x884C;&#x8A2D;&#x5B9A;&#x8AAA;&#xFF0C;&#x5982;&#x679C;&#x662F;html&#x7684;&#x8A71;&#x4E00;&#x6A23;&#x9001;&#x7D66;ejs&#x89E3;&#x91CB;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8AAA;&#x73FE;&#x5728;&#x4F60;&#x5728;&#x76EE;&#x9304;&#x64FA;html&#x8DDF;ejs&#xFF0C;&#x90FD;&#x6703;&#x88AB;&#x6383;&#x904E;&#x770B;&#x6709;&#x6C92;&#x6709;ejs&#x8A9E;&#x6CD5;&#x3002;</p>
<h1 id="jade&#x8207;ejs&#x7684;&#x512A;&#x7F3A;&#x9EDE;">jade&#x8207;ejs&#x7684;&#x512A;&#x7F3A;&#x9EDE;</h1>
<p>&#x512A;&#x9EDE;&#xFF1A;</p>
<ol>
<li>client&#x7AEF;&#x5448;&#x73FE;&#x901F;&#x5EA6;&#x5FEB;</li>
<li>&#x6709;&#x5B78;&#x904E;view engine&#x80FD;&#x5920;&#x5FEB;&#x901F;&#x4E0A;&#x624B;</li>
</ol>
<p>&#x7F3A;&#x9EDE;&#xFF1A;</p>
<ol>
<li>server&#x7AEF;&#x8981;&#x8017;&#x7528;&#x8CC7;&#x6E90;</li>
<li>&#x7248;&#x9762;&#x919C;&#x964B;</li>
<li>&#x505A;&#x5047;&#x8CC7;&#x6599;&#x6642;&#x96E3;&#x5EA6;&#x6703;&#x63D0;&#x5347;&#x5F88;&#x591A;</li>
<li>&#x5C0D;&#x524D;&#x7AEF;&#x5DE5;&#x7A0B;&#x5E2B;&#x4E0D;&#x53CB;&#x5584;</li>
<li>&#x8981;&#x591A;&#x5B78;&#x4E00;&#x7A2E;&#x8A9E;&#x8A00;</li>
</ol>
<h1 id="&#x53E6;&#x4E00;&#x500B;&#x9078;&#x64C7;-&#x4F7F;&#x7528;client-side-js-frameworkangularjs-or-reactjs">&#x53E6;&#x4E00;&#x500B;&#x9078;&#x64C7;-&#x4F7F;&#x7528;client side js framework:angular.js or react.js</h1>
<p>&#x6709;&#x9452;&#x65BC;view engine&#x7684;&#x773E;&#x591A;&#x7F3A;&#x9EDE;&#xFF0C;&#x9010;&#x6F38;&#x6709;&#x90E8;&#x5206;&#x4EBA;&#x6539;&#x63A1;&#x7528;angular.js&#x8DDF;react.js&#x505A;&#x70BA;view engine&#x7684;&#x66FF;&#x4EE3;&#x54C1;&#x3002;</p>
<p>&#x8B93;&#x6211;&#x5011;&#x505A;&#x500B;&#x7BC4;&#x4F8B;&#xFF0C;&#x5EFA;&#x7ACB;&#x4E00;&#x500B;&#x540D;&#x53EB;<strong>node_mvc_3_angularjs</strong>&#x76EE;&#x9304;</p>
<p>&#x4F60;&#x53EF;&#x4EE5;&#x53C3;&#x8003; <a href="https://github.com/y2468101216/node-wiki-gitbook/tree/master/src/node_mvc_3_angularjs" target="_blank">https://github.com/y2468101216/node-wiki-gitbook/tree/master/src/node_mvc_3_angularjs</a></p>
<p>&#x7D50;&#x69CB;&#xFF1A;</p>
<pre><code>node_mvc_3_angularjs/
&#x251C;&#x2500;&#x2500; bin/
|   &#x251C;&#x2500;&#x2500; login.js
&#x251C;&#x2500;&#x2500; public/
&#x2502;   &#x251C;&#x2500;&#x2500; index.html
&#x2514;&#x2500;&#x2500; app.js
</code></pre><p>login.js:</p>
<pre><code class="lang-javascript"><span class="hljs-comment">/**
 * Name:login.js
 * Purpose:ejs login example
 * Author:Yun
 * Version:1.0
 * Update:2015-09-22
 */</span>

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">this</span>.check = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">account, password, callback</span>)</span>{
        <span class="hljs-keyword">var</span> message = <span class="hljs-string">&apos;login success&apos;</span>;
        <span class="hljs-keyword">var</span> error = <span class="hljs-literal">false</span>;

        <span class="hljs-keyword">if</span>(account != <span class="hljs-string">&apos;test&apos;</span> &amp;&amp; error == <span class="hljs-literal">false</span>){
            message = <span class="hljs-string">&apos;account error&apos;</span>;
            error = <span class="hljs-literal">true</span>;
        }

        <span class="hljs-keyword">if</span>(password != <span class="hljs-string">&apos;test&apos;</span> &amp;&amp; error == <span class="hljs-literal">false</span>){
            message = <span class="hljs-string">&apos;password error&apos;</span>;
            error = <span class="hljs-literal">true</span>;
        }

        callback(message, error);
    }
}
</code></pre>
<p>index.html:</p>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">ng-app</span>=<span class="hljs-string">&quot;node_mvc_app&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Node MVC 3 angularjs<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://code.jquery.com/jquery-2.1.4.min.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.6/angular.min.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">ng-controller</span>=<span class="hljs-string">&quot;node_mvc_controller&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>Account:<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;account&quot;</span> <span class="hljs-attr">ng-model</span>=<span class="hljs-string">&quot;user.account&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>Password:<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">ng-model</span>=<span class="hljs-string">&quot;user.password&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">ng-click</span>=<span class="hljs-string">&quot;loginCheck()&quot;</span>&gt;</span>submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">ng-style</span>=<span class="hljs-string">&quot;messageStyle&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">var</span> app = angular.module(<span class="hljs-string">&apos;node_mvc_app&apos;</span>, []);
app.controller(<span class="hljs-string">&apos;node_mvc_controller&apos;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$scope, $http</span>)</span>{
    $scope.loginCheck = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> req = {
            method: <span class="hljs-string">&apos;POST&apos;</span>,
            url: <span class="hljs-string">&apos;login&apos;</span>,
            headers: {
                <span class="hljs-string">&apos;Content-Type&apos;</span>: <span class="hljs-string">&apos;application/x-www-form-urlencoded;charset=utf-8&apos;</span>
            },
            data: $.param($scope.user)
        }
        $http(req).success(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)</span>{
            <span class="hljs-keyword">if</span>(data.error){
                $scope.messageStyle = {color:<span class="hljs-string">&apos;red&apos;</span>};
            }<span class="hljs-keyword">else</span>{
                $scope.messageStyle = {color:<span class="hljs-string">&apos;green&apos;</span>};
            }
            $scope.message = data.message;
        });
    }
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>app.js:</p>
<pre><code class="lang-javascript"><span class="hljs-comment">/**
 * Name:app.js
 * Purpose:ejs express example
 * Author:Yun
 * Version:1.0
 * Update:2015-09-22
 */</span>

<span class="hljs-keyword">var</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;express&apos;</span>);
<span class="hljs-keyword">var</span> bodyParser = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;body-parser&apos;</span>);

<span class="hljs-keyword">var</span> app = express();

<span class="hljs-keyword">var</span> options = {
        root : __dirname + <span class="hljs-string">&apos;/public/&apos;</span>,
        dotfiles : <span class="hljs-string">&apos;deny&apos;</span>,
        headers : {
            <span class="hljs-string">&apos;x-timestamp&apos;</span> : <span class="hljs-built_in">Date</span>.now(),
            <span class="hljs-string">&apos;x-sent&apos;</span> : <span class="hljs-literal">true</span>
        }
    };

<span class="hljs-comment">//create application/x-www-form-urlencoded parser</span>
app.use(bodyParser.urlencoded({
    extended : <span class="hljs-literal">true</span>
}));

<span class="hljs-comment">//index page</span>
app.get(<span class="hljs-string">&apos;/&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>) </span>{
    res.sendFile(<span class="hljs-string">&apos;index.html&apos;</span>,options,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>)</span>{
        <span class="hljs-keyword">if</span>(err){
            <span class="hljs-built_in">console</span>.log(err);
        }
    });
});

<span class="hljs-comment">//login</span>
app.post(<span class="hljs-string">&apos;/login&apos;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>)</span>{
    <span class="hljs-keyword">var</span> loginClass = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./bin/login.js&apos;</span>);
    <span class="hljs-keyword">var</span> login = <span class="hljs-keyword">new</span> loginClass();
    login.check(req.body.account, req.body.password,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">returnMessage, isError</span>)</span>{
        res.send({message:returnMessage,error:isError});
    });
});

<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;server is running&apos;</span>);

app.listen(<span class="hljs-number">8080</span>);
</code></pre>
<p><img src="img/zh-tw/node_mvc_3/node_mvc_3_original.png" alt="node_mvc_3_original.png"></p>
<p><img src="img/zh-tw/node_mvc_3/node_mvc_3_account_error.png" alt="node_mvc_3_account_error.png"></p>
<p><img src="img/zh-tw/node_mvc_3/node_mvc_3_password_error.png" alt="node_mvc_3_password_error.png"></p>
<p><img src="img/zh-tw/node_mvc_3/node_mvc_3_success.png" alt="node_mvc_3_success.png"></p>
<p>login.js&#x672C;&#x8EAB;&#x4E26;&#x6C92;&#x6709;&#x8B8A;&#x52D5;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x5011;&#x76F4;&#x63A5;&#x4F86;&#x770B;index.html</p>
<p>&#x9019;&#x908A;&#x6211;&#x5011;&#x6539;&#x7528;ajax&#x53BB;&#x53D6;&#x5F97;&#x662F;&#x5426;&#x6709;&#x767B;&#x5165;&#x6210;&#x529F;&#x3002;ajax&#x6703;&#x7D66;&#x4F7F;&#x7528;&#x8005;&#x6BD4;&#x8F03;&#x597D;&#x7684;&#x9AD4;&#x9A57;&#xFF0C;&#x4E0D;&#x7136;&#x53CD;&#x8986;&#x5237;&#x65B0;&#x9801;&#x9762;&#x4F7F;&#x7528;&#x8005;&#x4E5F;&#x5F88;&#x7169;&#xFF0C;
&#x800C;&#x4E14;&#x8CC7;&#x6599;&#x4E0D;&#x7528;&#x591A;&#x505A;&#x8A2D;&#x5B9A;&#x5C31;&#x53EF;&#x4EE5;&#x4E00;&#x76F4;&#x7559;&#x5728;&#x7DB2;&#x9801;&#x4E0A;&#xFF0C;&#x95DC;&#x65BC;angular.js&#x7684;&#x8A9E;&#x6CD5;&#x53EF;&#x4EE5;&#x53C3;&#x8003;<a href="https://angularjs.org" target="_blank">&#x5B98;&#x7DB2;</a>&#xFF0C;&#x9019;&#x908A;&#x5C31;&#x4E0D;&#x518D;&#x591A;&#x505A;&#x8AAA;&#x660E;&#x3002;</p>
<p>app.js&#x56E0;&#x70BA;&#x6211;&#x5011;&#x4E0D;&#x518D;&#x4F7F;&#x7528;ejs&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x5011;&#x5C07;app.set&#x7684;&#x90E8;&#x5206;&#x5168;&#x62FF;&#x6389;&#xFF0C;&#x9019;&#x4E5F;&#x5C0E;&#x81F4;res.render&#x5FC5;&#x9808;&#x62FF;&#x6389;&#x3002;
&#x6240;&#x4EE5;&#x6211;&#x5011;&#x6539;&#x6210;res.sendFile&#x3002;</p>
<pre><code class="lang-javascript">res.sendFile(<span class="hljs-string">&apos;index.html&apos;</span>,options,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>)</span>{
    <span class="hljs-keyword">if</span>(err){
        <span class="hljs-built_in">console</span>.log(err);
    }
});
</code></pre>
<p>&#x56DE;&#x50B3;&#x7684;&#x90E8;&#x5206;&#xFF0C;server&#x4E1F;json&#x51FA;&#x4F86;&#x662F;&#x6700;&#x597D;&#x7684;&#xFF0C;&#x56E0;&#x70BA;JavaScript&#x5C0D;json&#x7684;&#x652F;&#x63F4;&#x5F88;&#x597D;&#xFF0C;&#x800C;&#x4E14;&#x5728;&#x63D0;&#x4F9B;&#x76F8;&#x540C;&#x8CC7;&#x8A0A;&#x7684;&#x60C5;&#x6CC1;&#x4E0B;
json&#x9060;&#x6BD4;xml&#x4F86;&#x7684;&#x7C21;&#x55AE;&#x3002;</p>
<pre><code class="lang-javascript">
app.post(<span class="hljs-string">&apos;/login&apos;</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req, res</span>)</span>{
    <span class="hljs-keyword">var</span> loginClass = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./bin/login.js&apos;</span>);
    <span class="hljs-keyword">var</span> login = <span class="hljs-keyword">new</span> loginClass();
    login.check(req.body.account, req.body.password,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">returnMessage, isError</span>)</span>{
        res.send({message:returnMessage,error:isError});
    });
});
</code></pre>
<h1 id="client-side-js-framework&#x7684;&#x512A;&#x7F3A;&#x9EDE;">client side js framework&#x7684;&#x512A;&#x7F3A;&#x9EDE;</h1>
<p>&#x512A;&#x9EDE;&#xFF1A;</p>
<ol>
<li>server&#x8017;&#x7528;&#x8CC7;&#x6E90;&#x8F03;&#x5C11;&#x3002;</li>
<li>&#x7248;&#x9762;&#x6574;&#x6F54;</li>
<li>&#x5C0D;&#x524D;&#x7AEF;&#x53CB;&#x5584;</li>
<li>&#x505A;&#x5047;&#x8CC7;&#x6599;&#x6642;&#x6BD4;&#x8F03;&#x8F15;&#x9B06;</li>
</ol>
<p>&#x7F3A;&#x9EDE;&#xFF1A;</p>
<ol>
<li>include page&#x6703;&#x5341;&#x5206;&#x7DE9;&#x6162;</li>
<li>&#x5FC5;&#x5B9A;&#x8981;&#x5148;&#x8F09;&#x5165;&#x8A72;framework</li>
<li>&#x4F7F;&#x7528;&#x8005;&#x591A;&#x6642;ajax&#x53EF;&#x80FD;&#x6703;&#x5C0D;server&#x9020;&#x6210;&#x66F4;&#x591A;&#x8CA0;&#x64D4;</li>
</ol>
<h1 id="&#x7D50;&#x8A9E;">&#x7D50;&#x8A9E;</h1>
<p>&#x5982;&#x4E0A;&#x9762;&#x6240;&#x6558;&#xFF0C;&#x5169;&#x7A2E;&#x65B9;&#x6CD5;&#x90FD;&#x6709;&#x512A;&#x7F3A;&#x9EDE;&#xFF0C;&#x958B;&#x767C;&#x6642;&#x61C9;&#x8A72;&#x4F9D;&#x7167;&#x5C08;&#x6848;&#x9700;&#x6C42;&#x53BB;&#x505A;&#x9078;&#x64C7;&#xFF0C;&#x751A;&#x81F3;&#x53EF;&#x4EE5;&#x5169;&#x7A2E;&#x6DF7;&#x7528;&#xFF0C;&#x4E0D;&#x8981;&#x88AB;&#x672C;&#x7BC7;&#x6587;&#x7AE0;&#x4FB7;&#x9650;&#x4F4F;&#x4E86;&#x3002;</p>
<h1 id="&#x53C3;&#x8003;&#x8CC7;&#x6599;">&#x53C3;&#x8003;&#x8CC7;&#x6599;</h1>
<ul>
<li>wiki-MVC:<a href="https://zh.wikipedia.org/wiki/MVC" target="_blank">https://zh.wikipedia.org/wiki/MVC</a></li>
<li>angular.js:<a href="https://angularjs.org" target="_blank">https://angularjs.org</a></li>
<li>stackoverflow-qs_vs_querystring:<a href="http://stackoverflow.com/questions/29175465/body-parser-extended-option-qs-vs-querystring" target="_blank">http://stackoverflow.com/questions/29175465/body-parser-extended-option-qs-vs-querystring</a></li>
</ul>

                                
                                </section>
                            
                        </div>
                    </div>
                
            </div>

            
                
                <a href="NODE_EXPRESS.html" class="navigation navigation-prev " aria-label="Previous page: NODE_EXPRESS">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="NODE_DATABASE.html" class="navigation navigation-next " aria-label="Next page: NODE_DATABASE">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"NODE_EXPRESS_VIEW","level":"1.10","depth":1,"next":{"title":"NODE_DATABASE","level":"1.11","depth":1,"path":"NODE_DATABASE.md","ref":"NODE_DATABASE.md","articles":[]},"previous":{"title":"NODE_EXPRESS","level":"1.9","depth":1,"path":"NODE_EXPRESS.md","ref":"NODE_EXPRESS.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-search","-sharing","-livereload","-fontsettings","baidu","sitemap","disqus"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"baidu":{"token":"7d789811683659f2ce2723c13b6f88ef"},"sitemap":{"hostname":"http://selenium.tester360.cn/"},"disqus":{"useIdentifier":false,"shortName":"wwwtester360cn"},"highlight":{},"lunr":{"maxIndexSize":1000000},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"node-wiki","language":["zh-cn","en"],"links":{"sidebar":{"首页":"http://www.tester360.cn"}},"gitbook":"*","description":"nodejs 学习入门教程"},"file":{"path":"NODE_EXPRESS_VIEW.md","mtime":"2016-06-20T01:58:12.565Z","type":"markdown"},"gitbook":{"version":"3.1.1","time":"2016-06-20T02:41:31.307Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-baidu/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.16.1/URI.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-disqus/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    

    </body>
</html>

